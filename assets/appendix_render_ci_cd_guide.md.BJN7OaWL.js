import{_ as i,c as a,o as n,ae as l}from"./chunks/framework.CDjunVez.js";const g=JSON.parse('{"title":"Vue + FastAPI on Render CI/CD Guide","description":"","frontmatter":{},"headers":[],"relativePath":"appendix/render_ci_cd_guide.md","filePath":"appendix/render_ci_cd_guide.md"}'),h={name:"appendix/render_ci_cd_guide.md"};function t(p,s,e,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="vue-fastapi-on-render-ci-cd-guide" tabindex="-1">Vue + FastAPI on Render CI/CD Guide <a class="header-anchor" href="#vue-fastapi-on-render-ci-cd-guide" aria-label="Permalink to &quot;Vue + FastAPI on Render CI/CD Guide&quot;">â€‹</a></h1><p>ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€my-recipesãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆVue.js + FastAPIï¼‰ã‚’ <a href="https://www.google.com/search?q=%E3%82%92Render.com" target="_blank" rel="noreferrer">Render.com</a> ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€æœ€çµ‚çš„ã« GitHub Actions ã‚’ç”¨ã„ãŸ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã¾ã§ã®æŠ€è¡“çš„ãªé“ã®ã‚Šã‚’è¨˜éŒ²ã—ãŸã‚‚ã®ã§ã™ã€‚</p><p>å½“åˆã®è¤‡é›‘ãªæ§‹æˆã§ç™ºç”Ÿã—ãŸæ•°ã€…ã®å•é¡Œã¨ã€ãã‚Œã‚‰ã‚’ã„ã‹ã«ã—ã¦ã‚·ãƒ³ãƒ—ãƒ«ã§å …ç‰¢ãªå˜ä¸€ã‚³ãƒ³ãƒ†ãƒŠæ§‹æˆã¸ã¨æ˜‡è¯ã•ã›ãŸã‹ã€ãã®å…·ä½“çš„ãªæ‰‹é †ã¨è¨­è¨ˆæ€æƒ³ã‚’å…±æœ‰ã—ã¾ã™ã€‚</p><h2 id="ã“ã®ãƒˆã‚™ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚™è§£æ±ºã™ã‚‹èª²é¡Œ" tabindex="-1">ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè§£æ±ºã™ã‚‹èª²é¡Œ <a class="header-anchor" href="#ã“ã®ãƒˆã‚™ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚™è§£æ±ºã™ã‚‹èª²é¡Œ" aria-label="Permalink to &quot;ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè§£æ±ºã™ã‚‹èª²é¡Œ&quot;">â€‹</a></h2><ul><li>Vue.js + FastAPI æ§‹æˆã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã€Dockerã‚’ä½¿ã£ã¦PaaSï¼ˆRenderï¼‰ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•</li><li>Renderã®ç’°å¢ƒã§é »ç™ºã™ã‚‹ã€ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´ã¨ãã®å›é¿ç­–</li><li>ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ãŸå ´åˆã«ã®ã¿è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€ä¿¡é ¼æ€§ã®é«˜ã„CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰</li></ul><h2 id="ãƒ†ã‚™ãƒ•ã‚šãƒ­ã‚¤æˆ¦ç•¥ã®å¤‰é·" tabindex="-1">ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥ã®å¤‰é· <a class="header-anchor" href="#ãƒ†ã‚™ãƒ•ã‚šãƒ­ã‚¤æˆ¦ç•¥ã®å¤‰é·" aria-label="Permalink to &quot;ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥ã®å¤‰é·&quot;">â€‹</a></h2><h3 id="âŒ-å¤±æ•—ã—ãŸæˆ¦ç•¥-2ã‚³ãƒ³ãƒ†ãƒŠ-nginxãƒªãƒã‚™ãƒ¼ã‚¹ãƒ•ã‚šãƒ­ã‚­ã‚·" tabindex="-1">âŒ å¤±æ•—ã—ãŸæˆ¦ç•¥ï¼š2ã‚³ãƒ³ãƒ†ãƒŠ + Nginxãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚· <a class="header-anchor" href="#âŒ-å¤±æ•—ã—ãŸæˆ¦ç•¥-2ã‚³ãƒ³ãƒ†ãƒŠ-nginxãƒªãƒã‚™ãƒ¼ã‚¹ãƒ•ã‚šãƒ­ã‚­ã‚·" aria-label="Permalink to &quot;âŒ å¤±æ•—ã—ãŸæˆ¦ç•¥ï¼š2ã‚³ãƒ³ãƒ†ãƒŠ + Nginxãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·&quot;">â€‹</a></h3><p>å½“åˆã€ä»¥ä¸‹ã®æ§‹æˆã‚’ç›®æŒ‡ã—ã¾ã—ãŸï¼š</p><ul><li>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Vue.jsã‚’ãƒ“ãƒ«ãƒ‰ã—ã€Nginxã‚³ãƒ³ãƒ†ãƒŠã§é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ä¿¡</li><li>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: FastAPIã‚’Uvicornã§å®Ÿè¡Œã™ã‚‹ã€åˆ¥ã®ã‚³ãƒ³ãƒ†ãƒŠ</li></ul><p><strong>å•é¡Œç‚¹ï¼š</strong></p><ul><li>èµ·å‹•é †åºã®å•é¡Œï¼šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒèµ·å‹•ã™ã‚‹å‰ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒèµ·å‹•ã—æ¥ç¶šã‚¨ãƒ©ãƒ¼</li><li>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å•é¡Œï¼šã‚³ãƒ³ãƒ†ãƒŠé–“ã®åå‰è§£æ±ºãŒä¸å®‰å®š</li><li>è¨­å®šã®è¤‡é›‘ã•ï¼šrender.yaml, Dockerfile (x2), nginx.conf, entrypoint.sh ãªã©ç®¡ç†å¯¾è±¡ãŒå¤šã„</li></ul><hr><h3 id="âœ…-æˆåŠŸã—ãŸæˆ¦ç•¥-å˜ä¸€ã‚³ãƒ³ãƒ†ãƒŠ-fastapiã«ã‚ˆã‚‹é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡" tabindex="-1">âœ… æˆåŠŸã—ãŸæˆ¦ç•¥ï¼šå˜ä¸€ã‚³ãƒ³ãƒ†ãƒŠï¼ˆFastAPIã«ã‚ˆã‚‹é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ï¼‰ <a class="header-anchor" href="#âœ…-æˆåŠŸã—ãŸæˆ¦ç•¥-å˜ä¸€ã‚³ãƒ³ãƒ†ãƒŠ-fastapiã«ã‚ˆã‚‹é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡" aria-label="Permalink to &quot;âœ… æˆåŠŸã—ãŸæˆ¦ç•¥ï¼šå˜ä¸€ã‚³ãƒ³ãƒ†ãƒŠï¼ˆFastAPIã«ã‚ˆã‚‹é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ï¼‰&quot;">â€‹</a></h3><h4 id="æ§‹æˆæ¦‚è¦" tabindex="-1">æ§‹æˆæ¦‚è¦ <a class="header-anchor" href="#æ§‹æˆæ¦‚è¦" aria-label="Permalink to &quot;æ§‹æˆæ¦‚è¦&quot;">â€‹</a></h4><ol><li>Dockerfileå†…ã§ã€ã¾ãšVue.jsã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ï¼ˆãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ï¼‰</li><li>ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸé™çš„ãƒ•ã‚¡ã‚¤ãƒ«(dist)ã‚’ FastAPI ã‚³ãƒ³ãƒ†ãƒŠã¸ã‚³ãƒ”ãƒ¼</li><li>FastAPI ãŒ <code>/api</code> ã§ã¯ API ã‚’ã€ãã®ä»–ã®ãƒ‘ã‚¹ã§ã¯ <code>dist</code> ã®é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ä¿¡</li></ol><p><strong>ãƒ¡ãƒªãƒƒãƒˆï¼ˆKISSåŸå‰‡ï¼‰ï¼š</strong></p><ul><li>ã‚·ãƒ³ãƒ—ãƒ«ï¼šã‚µãƒ¼ãƒ“ã‚¹ã¯1ã¤ã€Nginxä¸è¦</li><li>å …ç‰¢ï¼šèµ·å‹•é †åºã‚„é€šä¿¡å•é¡ŒãŒè§£æ¶ˆ</li><li>ç®¡ç†ãŒå®¹æ˜“ï¼šè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ Dockerfile ã¨ render.yaml ã®2ã¤ã®ã¿</li></ul><hr><h2 id="ğŸ› -æ§‹ç¯‰æ‰‹é †" tabindex="-1">ğŸ›  æ§‹ç¯‰æ‰‹é † <a class="header-anchor" href="#ğŸ› -æ§‹ç¯‰æ‰‹é †" aria-label="Permalink to &quot;ğŸ›  æ§‹ç¯‰æ‰‹é †&quot;">â€‹</a></h2><h3 id="_1-ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®å†æ§‹ç¯‰" tabindex="-1">1. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®å†æ§‹ç¯‰ <a class="header-anchor" href="#_1-ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®å†æ§‹ç¯‰" aria-label="Permalink to &quot;1. ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®å†æ§‹ç¯‰&quot;">â€‹</a></h3><h4 id="_1-1-vite-config-ts-ã®æœ€é©åŒ–" tabindex="-1">1.1 <code>vite.config.ts</code> ã®æœ€é©åŒ– <a class="header-anchor" href="#_1-1-vite-config-ts-ã®æœ€é©åŒ–" aria-label="Permalink to &quot;1.1 \`vite.config.ts\` ã®æœ€é©åŒ–&quot;">â€‹</a></h4><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// frontend/vite.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vitejs/plugin-vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { resolve } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    outDir: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;../backend/dist&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    emptyOutDir: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h4 id="_1-2-app-factoryãƒã‚šã‚¿ãƒ¼ãƒ³ã®å°å…¥-backend-api-main-py" tabindex="-1">1.2 App Factoryãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥ (<code>backend/api/main.py</code>) <a class="header-anchor" href="#_1-2-app-factoryãƒã‚šã‚¿ãƒ¼ãƒ³ã®å°å…¥-backend-api-main-py" aria-label="Permalink to &quot;1.2 App Factoryãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥ (\`backend/api/main.py\`)&quot;">â€‹</a></h4><div class="language-py vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi.staticfiles </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> StaticFiles</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pathlib </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Path</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mount_static_files: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; FastAPI:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # app.include_router(...) ãªã©ãƒ«ãƒ¼ã‚¿ãƒ¼è¿½åŠ </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mount_static_files:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        dist_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Path(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">__file__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).parent.parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dist&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dist_path.exists():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            app.mount(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, StaticFiles(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">directory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dist_path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;static&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> create_app()</span></span></code></pre></div><hr><h3 id="_2-dockerfile-ã®æœ€çµ‚å½¢" tabindex="-1">2. <code>Dockerfile</code> ã®æœ€çµ‚å½¢ <a class="header-anchor" href="#_2-dockerfile-ã®æœ€çµ‚å½¢" aria-label="Permalink to &quot;2. \`Dockerfile\` ã®æœ€çµ‚å½¢&quot;">â€‹</a></h3><div class="language-dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --- ã‚¹ãƒ†ãƒ¼ã‚¸1: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ«ãƒ‰ ---</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node:20 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">AS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frontend-builder</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /app</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frontend/ ./frontend/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /app/frontend</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npm install &amp;&amp; npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --- ã‚¹ãƒ†ãƒ¼ã‚¸2: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“ ---</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> python:3.11-slim</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /app</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backend/ ./backend/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> --from=frontend-builder /app/backend/dist ./backend/dist/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pip install --no-cache-dir -r backend/requirements.txt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /app/backend</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;uvicorn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api.main:app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--host&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.0.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8686&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><hr><h3 id="_3-render-è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«-render-yaml" tabindex="-1">3. Render è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ<code>render.yaml</code>ï¼‰ <a class="header-anchor" href="#_3-render-è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«-render-yaml" aria-label="Permalink to &quot;3. Render è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ\`render.yaml\`ï¼‰&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">web</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-recipes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">docker</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    plan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">free</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dockerfilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    autoDeploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hara_20250808_CI</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    startCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">uvicorn api.main:app --host 0.0.0.0 --port 8686</span></span></code></pre></div><hr><h3 id="_4-github-actions-ã«ã‚ˆã‚‹-ci-cd" tabindex="-1">4. GitHub Actions ã«ã‚ˆã‚‹ CI/CD <a class="header-anchor" href="#_4-github-actions-ã«ã‚ˆã‚‹-ci-cd" aria-label="Permalink to &quot;4. GitHub Actions ã«ã‚ˆã‚‹ CI/CD&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .github/workflows/ci.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CI/CD for my-recipes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hara_20250808_CI&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  test-and-build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã€ä¾å­˜é–¢ä¿‚ã€ãƒ“ãƒ«ãƒ‰ã€ãƒ†ã‚¹ãƒˆ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Run FastAPI tests</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          PYTHONPATH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./backend</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          RAKUTEN_APP_ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.RAKUTEN_APP_ID }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pytest backend/tests</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  deploy-to-render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    needs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test-and-build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">github.event_name == &#39;push&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Trigger Render Deploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">curl -X POST \${{ secrets.RENDER_DEPLOY_HOOK_URL }}</span></span></code></pre></div><hr><h2 id="ğŸ’¡-tips-å­¦ã²ã‚™" tabindex="-1">ğŸ’¡ Tips &amp; å­¦ã³ <a class="header-anchor" href="#ğŸ’¡-tips-å­¦ã²ã‚™" aria-label="Permalink to &quot;ğŸ’¡ Tips &amp; å­¦ã³&quot;">â€‹</a></h2><ol><li><p><strong>Render ã® <code>$PORT</code> ã¯å¿…ãšä½¿ã†ã“ã¨</strong><br> å›ºå®šãƒãƒ¼ãƒˆã§ã¯ãªãã€ç’°å¢ƒå¤‰æ•° <code>$PORT</code> ã«å¾“ã†å¿…è¦ã‚ã‚Šã€‚</p></li><li><p><strong>ãƒ“ãƒ«ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ â‰  ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤</strong><br><code>dist</code> ã‚’å«ã‚ãŸãƒ“ãƒ«ãƒ‰ãŒå¿…è¦ãªå ´åˆã€<code>.gitignore</code> ã‹ã‚‰é™¤å¤–ã—ã¦Gitã«å«ã‚ã‚‹ã€‚</p></li><li><p><strong>App Factory ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ´»ç”¨</strong><br><code>create_app()</code> é–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆã¨æœ¬ç•ªã®è²¬å‹™ã‚’æ˜ç¢ºã«åˆ†é›¢å¯èƒ½ã€‚</p></li><li><p><strong>ãƒ‡ãƒãƒƒã‚°ã¯ã€Œè¨¼æ‹ ã€ã‚’è¦‹ã‚‹ã“ã¨</strong><br><code>RUN ls -laR</code> ã‚’ä»•è¾¼ã‚“ã§ COPY ã‚„ãƒ“ãƒ«ãƒ‰çµæœã‚’ç¢ºã‹ã‚ã‚‹ã®ãŒæœ‰åŠ¹ã€‚</p></li></ol><hr><h2 id="ğŸ“˜-ãŠã‚ã‚Šã«" tabindex="-1">ğŸ“˜ ãŠã‚ã‚Šã« <a class="header-anchor" href="#ğŸ“˜-ãŠã‚ã‚Šã«" aria-label="Permalink to &quot;ğŸ“˜ ãŠã‚ã‚Šã«&quot;">â€‹</a></h2><p>PaaS ç’°å¢ƒã§ã¯ã¾ãšã€Œæœ€å°æ§‹æˆã€ã§å§‹ã‚ã‚‹ã“ã¨ã€‚<br> è¤‡é›‘åŒ–ã›ãšã€KISSåŸå‰‡ã«å¾“ã†ã“ã¨ãŒæœ€ã‚‚å†ç¾æ€§ã¨ä¿å®ˆæ€§ã«å„ªã‚ŒãŸæ§‹æˆã‚’å®Ÿç¾ã™ã‚‹éµã¨ãªã‚Šã¾ã™ã€‚</p>`,39)])])}const o=i(h,[["render",t]]);export{g as __pageData,o as default};
