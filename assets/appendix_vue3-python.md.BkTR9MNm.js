import{_ as a,c as i,o as n,ae as e}from"./chunks/framework.Ai_99reE.js";const c=JSON.parse('{"title":"Vue 3 + Python (FastAPI) Monorepo開発環境ガイド","description":"","frontmatter":{},"headers":[],"relativePath":"appendix/vue3-python.md","filePath":"appendix/vue3-python.md"}'),t={name:"appendix/vue3-python.md"};function p(l,s,h,o,r,d){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="vue-3-python-fastapi-monorepo開発環境ガイド" tabindex="-1">Vue 3 + Python (FastAPI) Monorepo開発環境ガイド <a class="header-anchor" href="#vue-3-python-fastapi-monorepo開発環境ガイド" aria-label="Permalink to &quot;Vue 3 + Python (FastAPI) Monorepo開発環境ガイド&quot;">​</a></h1><p>Vue 3 (Vite) と Python (FastAPI) を一つのリポジトリで管理し、Vercelにデプロイするための、フロントエンドとバックエンドが連携する開発環境の構築手順です。</p><hr><h2 id="_1-前提ツール" tabindex="-1">1. 前提ツール <a class="header-anchor" href="#_1-前提ツール" aria-label="Permalink to &quot;1. 前提ツール&quot;">​</a></h2><p>開発を始める前に、お使いのPCに以下のツールがインストールされていることを確認してください。</p><ul><li><strong>Node.js</strong> (LTS版を推奨)</li><li><strong>Python</strong> (3.9以上)</li><li><strong>Git</strong></li><li><strong>VSCode</strong></li></ul><hr><h2 id="_2-プロジェクトの初期設定" tabindex="-1">2. プロジェクトの初期設定 <a class="header-anchor" href="#_2-プロジェクトの初期設定" aria-label="Permalink to &quot;2. プロジェクトの初期設定&quot;">​</a></h2><p>まず、プロジェクトの土台となるフォルダと、Pythonの仮想環境を準備します。</p><ol><li><p><strong>プロジェクトフォルダ作成と移動</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> memosphere</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> memosphere</span></span></code></pre></div></li><li><p><strong>Git初期化</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span></code></pre></div></li><li><p><strong>Python仮想環境の作成と有効化</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 仮想環境作成</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> venv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .venv</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 有効化 (Windows)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.venv\\Scripts\\activate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 有効化 (Mac/Linux)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .venv/bin/activate</span></span></code></pre></div></li><li><p><strong>.gitignoreの作成</strong> 不要なファイルがGitに登録されないように、<code>.gitignore</code>ファイルを作成して以下の内容を記述します。</p><div class="language-gitignore vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">gitignore</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># .gitignore</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Python</span></span>
<span class="line"><span>.venv/</span></span>
<span class="line"><span>__pycache__/</span></span>
<span class="line"><span>*.pyc</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Node.js</span></span>
<span class="line"><span>node_modules/</span></span>
<span class="line"><span>dist/</span></span>
<span class="line"><span>.DS_Store</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Editor</span></span>
<span class="line"><span>.vscode/</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Env</span></span>
<span class="line"><span>.env</span></span></code></pre></div></li></ol><hr><h2 id="_3-バックエンド-fastapi-の設定" tabindex="-1">3. バックエンド (FastAPI) の設定 <a class="header-anchor" href="#_3-バックエンド-fastapi-の設定" aria-label="Permalink to &quot;3. バックエンド (FastAPI) の設定&quot;">​</a></h2><p>次に、APIサーバーを準備します。</p><ol><li><p><strong><code>requirements.txt</code>の作成</strong> 必要なPythonライブラリを定義します。</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># requirements.txt</span></span>
<span class="line"><span>fastapi</span></span>
<span class="line"><span>uvicorn[standard]</span></span>
<span class="line"><span>sqlalchemy</span></span>
<span class="line"><span>psycopg2-binary</span></span>
<span class="line"><span>python-dotenv</span></span></code></pre></div></li><li><p><strong>ライブラリのインストール</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirements.txt</span></span></code></pre></div></li><li><p><strong>APIフォルダとファイルの作成</strong> Vercelの作法に従い、プロジェクトルートに<code>api</code>フォルダを作成し、その中に<code>index.py</code>を作成します。</p><p><strong><code>api/index.py</code></strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fastapi </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># from api.routers import memos # ←後で機能追加時に利用</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FastAPI()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># app.include_router(memos.router) # ←後で機能追加時に利用</span></span></code></pre></div></li></ol><hr><h2 id="_4-フロントエンド-vue-3-の設定" tabindex="-1">4. フロントエンド (Vue 3) の設定 <a class="header-anchor" href="#_4-フロントエンド-vue-3-の設定" aria-label="Permalink to &quot;4. フロントエンド (Vue 3) の設定&quot;">​</a></h2><p>画面側のアプリケーションを準備します。</p><ol><li><p><strong>Vueプロジェクト作成</strong> プロジェクトルートで以下のコマンドを実行し、<code>frontend</code>フォルダを作成します。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vite@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frontend</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vue-ts</span></span></code></pre></div></li><li><p><strong>依存関係インストール</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frontend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div></li><li><p><strong>開発サーバーのプロキシ設定</strong> ローカル開発時にAPIリクエストをバックエンドに転送するための設定です。</p><p><strong><code>frontend/vite.config.ts</code></strong>:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vitejs/plugin-vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    proxy: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[http://127.0.0.1:8000](http://127.0.0.1:8000)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ローカルFastAPIサーバー</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        changeOrigin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li></ol><hr><h2 id="_5-ローカルでの開発ワークフロー" tabindex="-1">5. ローカルでの開発ワークフロー <a class="header-anchor" href="#_5-ローカルでの開発ワークフロー" aria-label="Permalink to &quot;5. ローカルでの開発ワークフロー&quot;">​</a></h2><p>開発中は、バックエンドとフロントエンド、<strong>2つのサーバーを同時に起動</strong>する必要があります。VSCodeのターミナルを2つ開いて、それぞれで実行します。</p><ul><li><strong>ターミナル1（バックエンド用）</strong> プロジェクトルートで実行します。<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uvicorn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.index:app</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --reload</span></span></code></pre></div></li><li><strong>ターミナル2（フロントエンド用）</strong><code>frontend</code> ディレクトリに移動して実行します。<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> frontend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div></li></ul><hr><h2 id="_6-デプロイ設定-vercel" tabindex="-1">6. デプロイ設定 (Vercel) <a class="header-anchor" href="#_6-デプロイ設定-vercel" aria-label="Permalink to &quot;6. デプロイ設定 (Vercel)&quot;">​</a></h2><p>作成したアプリをVercelにデプロイするための設定です。</p><ol><li><p><strong>リポジトリ名を統一</strong> Vercelの命名規則（小文字のみ）に合わせて、GitHubリポジトリ名やローカルのフォルダ名を<code>memosphere</code>のように小文字に統一します。</p></li><li><p><strong><code>vercel link</code>コマンド実行</strong> ターミナルで<code>vercel link</code>を実行し、対話形式で以下のように設定します。</p><ul><li><strong>Project name</strong>: <code>memosphere</code> （小文字）</li><li><strong>Directory with code</strong>: <code>frontend</code></li></ul></li><li><p><strong>環境変数の設定</strong> Vercelのプロジェクト設定画面の「Environment Variables」で、<code>.env</code>ファイルに記載した<code>DATABASE_URL</code>や<code>SUPABASE_KEY</code>などを設定します。</p></li></ol><hr><h2 id="tips-トラブルシューティング" tabindex="-1">Tips &amp; トラブルシューティング <a class="header-anchor" href="#tips-トラブルシューティング" aria-label="Permalink to &quot;Tips &amp; トラブルシューティング&quot;">​</a></h2><h3 id="requirements-txtの文字コードエラー" tabindex="-1"><code>requirements.txt</code>の文字コードエラー <a class="header-anchor" href="#requirements-txtの文字コードエラー" aria-label="Permalink to &quot;\`requirements.txt\`の文字コードエラー&quot;">​</a></h3><ul><li><strong>症状</strong>: <code>pip install -r requirements.txt</code>実行時に<code>UnicodeDecodeError</code>が発生する。</li><li><strong>原因</strong>: ファイルが<code>UTF-8</code>形式で保存されていない。</li><li><strong>解決策</strong>: <ol><li>VSCodeの右下ステータスバーからエンコーディングを確認し、「エンコード付きで保存」→「UTF-8」で保存し直す。</li><li><strong>（推奨）</strong> ライブラリを直接インストールした後、<code>pip freeze &gt; requirements.txt</code>コマンドでファイルを自動生成する。この方法はバージョンも固定され、最も確実です。</li></ol></li></ul><h3 id="apiリクエストが応答なし-ペンディング-になる" tabindex="-1">APIリクエストが応答なし（ペンディング）になる <a class="header-anchor" href="#apiリクエストが応答なし-ペンディング-になる" aria-label="Permalink to &quot;APIリクエストが応答なし（ペンディング）になる&quot;">​</a></h3><ul><li><strong>症状</strong>: ブラウザでAPIのURLにアクセスしても画面が真っ白で、ネットワークタブではリクエストが完了しない。</li><li><strong>原因</strong>: バックエンドサーバー（FastAPI/uvicorn）が起動していない。</li><li><strong>解決策</strong>: フロントエンド（Vite）とバックエンド（uvicorn）の<strong>両方のサーバーが、別々のターミナルで起動しているか</strong>確認する。</li></ul><h3 id="vercelのプロジェクト名でエラー" tabindex="-1">Vercelのプロジェクト名でエラー <a class="header-anchor" href="#vercelのプロジェクト名でエラー" aria-label="Permalink to &quot;Vercelのプロジェクト名でエラー&quot;">​</a></h3><ul><li><strong>症状</strong>: <code>vercel link</code>実行時にプロジェクト名に関するエラーが出る。</li><li><strong>原因</strong>: Vercelのプロジェクト名に大文字が含まれている。</li><li><strong>解決策</strong>: プロジェクト名をすべて小文字にする（例: <code>memoSphere</code> → <code>memosphere</code>）。</li></ul>`,34)])])}const g=a(t,[["render",p]]);export{c as __pageData,g as default};
