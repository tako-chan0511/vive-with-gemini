import{_ as a,c as i,o as s,ae as d}from"./chunks/framework.Ai_99reE.js";const u=JSON.parse('{"title":"API設計のイロハ","description":"","frontmatter":{},"headers":[],"relativePath":"appendix/api-design-guide.md","filePath":"appendix/api-design-guide.md"}'),e={name:"appendix/api-design-guide.md"};function l(r,t,n,h,o,p){return s(),i("div",null,[...t[0]||(t[0]=[d(`<h1 id="api設計のイロハ" tabindex="-1">API設計のイロハ <a class="header-anchor" href="#api設計のイロハ" aria-label="Permalink to &quot;API設計のイロハ&quot;">​</a></h1><p>Web API を設計・実装する際に押さえておきたい基本原則と実践的なポイントを解説します。</p><hr><h2 id="_1-uri設計の基本" tabindex="-1">1. URI設計の基本 <a class="header-anchor" href="#_1-uri設計の基本" aria-label="Permalink to &quot;1. URI設計の基本&quot;">​</a></h2><ul><li><strong>リソースベース設計（名詞で）</strong><ul><li>✅ <code>/users/123</code>：OK</li><li>❌ <code>/getUser?id=123</code>：NG</li></ul></li><li><strong>階層構造の活用</strong>： <ul><li><code>/users/123/posts</code>：指定ユーザの投稿一覧</li></ul></li></ul><hr><h2 id="_2-httpメソッドの使い分け" tabindex="-1">2. HTTPメソッドの使い分け <a class="header-anchor" href="#_2-httpメソッドの使い分け" aria-label="Permalink to &quot;2. HTTPメソッドの使い分け&quot;">​</a></h2><table tabindex="0"><thead><tr><th>メソッド</th><th>概要</th><th>使用例</th></tr></thead><tbody><tr><td>GET</td><td>データ取得</td><td><code>/articles</code></td></tr><tr><td>POST</td><td>新規作成</td><td><code>/articles</code></td></tr><tr><td>PUT</td><td>全体更新</td><td><code>/articles/1</code></td></tr><tr><td>PATCH</td><td>部分更新</td><td><code>/articles/1</code></td></tr><tr><td>DELETE</td><td>削除</td><td><code>/articles/1</code></td></tr></tbody></table><hr><h2 id="_3-ステータスコード" tabindex="-1">3. ステータスコード <a class="header-anchor" href="#_3-ステータスコード" aria-label="Permalink to &quot;3. ステータスコード&quot;">​</a></h2><table tabindex="0"><thead><tr><th>コード</th><th>意味</th></tr></thead><tbody><tr><td>200</td><td>OK（成功）</td></tr><tr><td>201</td><td>Created（作成成功）</td></tr><tr><td>204</td><td>No Content（削除など）</td></tr><tr><td>400</td><td>Bad Request（不正リクエスト）</td></tr><tr><td>401</td><td>Unauthorized（認証失敗）</td></tr><tr><td>403</td><td>Forbidden（権限なし）</td></tr><tr><td>404</td><td>Not Found（存在しない）</td></tr><tr><td>500</td><td>Internal Server Error</td></tr></tbody></table><hr><h2 id="_4-jsonレスポンス設計例" tabindex="-1">4. JSONレスポンス設計例 <a class="header-anchor" href="#_4-jsonレスポンス設計例" aria-label="Permalink to &quot;4. JSONレスポンス設計例&quot;">​</a></h2><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Taro&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ユーザーを取得しました&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="_5-エラーハンドリング" tabindex="-1">5. エラーハンドリング <a class="header-anchor" href="#_5-エラーハンドリング" aria-label="Permalink to &quot;5. エラーハンドリング&quot;">​</a></h2><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;USER_NOT_FOUND&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;指定されたユーザーが存在しません&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="_6-バージョン管理" tabindex="-1">6. バージョン管理 <a class="header-anchor" href="#_6-バージョン管理" aria-label="Permalink to &quot;6. バージョン管理&quot;">​</a></h2><ul><li><p>URIにバージョンを含める：</p><ul><li><code>/api/v1/users</code></li></ul></li><li><p>将来的な変更に備えた設計</p></li></ul><hr><h2 id="_7-認証・認可" tabindex="-1">7. 認証・認可 <a class="header-anchor" href="#_7-認証・認可" aria-label="Permalink to &quot;7. 認証・認可&quot;">​</a></h2><ul><li>HTTPS必須</li><li>JWT または OAuth2 の採用</li><li>APIキー/IP制限/WAFによるセキュリティ強化</li></ul><hr><h2 id="_8-ドキュメント管理" tabindex="-1">8. ドキュメント管理 <a class="header-anchor" href="#_8-ドキュメント管理" aria-label="Permalink to &quot;8. ドキュメント管理&quot;">​</a></h2><ul><li>OpenAPI(Swagger) でドキュメント化</li><li>Postman Collection や モックサーバ活用</li></ul><hr><h2 id="_9-非機能対策" tabindex="-1">9. 非機能対策 <a class="header-anchor" href="#_9-非機能対策" aria-label="Permalink to &quot;9. 非機能対策&quot;">​</a></h2><ul><li>レートリミット（DoS対策）</li><li>ログ（CloudWatch, ELK）</li><li>ヘルスチェック（/health）</li><li>フォールバック処理</li><li>再試行（リトライ）</li></ul><hr><h2 id="_10-開発・運用体制" tabindex="-1">10. 開発・運用体制 <a class="header-anchor" href="#_10-開発・運用体制" aria-label="Permalink to &quot;10. 開発・運用体制&quot;">​</a></h2><ul><li>CI/CD（GitHub Actions など）</li><li>バージョン管理・ステージング環境</li><li>IaC（Terraform, CloudFormation）</li></ul><p>ーーーー</p><h1 id="api設計-チェックリスト-✅" tabindex="-1">API設計 チェックリスト ✅ <a class="header-anchor" href="#api設計-チェックリスト-✅" aria-label="Permalink to &quot;API設計 チェックリスト ✅&quot;">​</a></h1><table tabindex="0"><thead><tr><th>チェック項目</th><th>確認済</th><th>メモ</th></tr></thead><tbody><tr><td>URI設計が REST に準拠しているか？</td><td></td><td>リソースは名詞／階層構造</td></tr><tr><td>HTTPメソッドが適切に使われているか？</td><td></td><td>POST/GET/PATCH など</td></tr><tr><td>レスポンス形式が統一されているか？</td><td></td><td>success/error形式</td></tr><tr><td>エラーハンドリングが一貫しているか？</td><td></td><td>エラーコード、詳細</td></tr><tr><td>ステータスコードが適切に返されているか？</td><td></td><td>201, 400, 500など</td></tr><tr><td>バージョン管理されているか？</td><td></td><td><code>/api/v1/...</code></td></tr><tr><td>認証／認可が導入されているか？</td><td></td><td>JWT、OAuth2</td></tr><tr><td>HTTPS強制がされているか？</td><td></td><td>-</td></tr><tr><td>ドキュメントが存在しているか？</td><td></td><td>Swagger / Postman</td></tr><tr><td>モック環境が準備されているか？</td><td></td><td>テスト用サーバ</td></tr><tr><td>ログ出力は適切か？</td><td></td><td>CloudWatch/ELK連携</td></tr><tr><td>APIキーや環境変数は安全に管理されているか？</td><td></td><td><code>.env</code>/Secrets管理</td></tr><tr><td>レートリミットやキャッシュ戦略があるか？</td><td></td><td>Redis/ETag</td></tr><tr><td>冗長化やリトライ・フォールバック戦略あり？</td><td></td><td>タイムアウト対応など</td></tr><tr><td>CI/CD環境でテスト・デプロイできるか？</td><td></td><td>GitHub Actions 等</td></tr></tbody></table>`,35)])])}const c=a(e,[["render",l]]);export{u as __pageData,c as default};
