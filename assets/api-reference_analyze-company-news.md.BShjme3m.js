import{_ as i,c as a,o as t,ae as n}from"./chunks/framework.CDjunVez.js";const c=JSON.parse('{"title":"API仕様書：企業ニュース要約分析API","description":"","frontmatter":{},"headers":[],"relativePath":"api-reference/analyze-company-news.md","filePath":"api-reference/analyze-company-news.md"}'),e={name:"api-reference/analyze-company-news.md"};function l(h,s,p,k,r,d){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="api仕様書-企業ニュース要約分析api" tabindex="-1">API仕様書：企業ニュース要約分析API <a class="header-anchor" href="#api仕様書-企業ニュース要約分析api" aria-label="Permalink to &quot;API仕様書：企業ニュース要約分析API&quot;">​</a></h1><hr><h2 id="title-analyze-company-news-apidescription-指定された企業名に関する最新ニュースを取得し、aiで要約・要因分析を行うエンドポイントです。" tabindex="-1">title: analyze-company-news API description: 指定された企業名に関する最新ニュースを取得し、AIで要約・要因分析を行うエンドポイントです。 <a class="header-anchor" href="#title-analyze-company-news-apidescription-指定された企業名に関する最新ニュースを取得し、aiで要約・要因分析を行うエンドポイントです。" aria-label="Permalink to &quot;title: analyze-company-news API
description: 指定された企業名に関する最新ニュースを取得し、AIで要約・要因分析を行うエンドポイントです。&quot;">​</a></h2><h2 id="概要" tabindex="-1">概要 <a class="header-anchor" href="#概要" aria-label="Permalink to &quot;概要&quot;">​</a></h2><p>このAPIは、指定された企業名に関連するニュースを検索し、その中から直近の重要な記事を抽出、AIを用いて要約と要因分析を行い、クライアントに返却します。</p><h2 id="エンドポイント" tabindex="-1">エンドポイント <a class="header-anchor" href="#エンドポイント" aria-label="Permalink to &quot;エンドポイント&quot;">​</a></h2><ul><li><strong>メソッド:</strong> <code>GET</code></li><li><strong>パス:</strong> <code>/api/analyze-company-news</code></li></ul><h2 id="クエリパラメータ" tabindex="-1">クエリパラメータ <a class="header-anchor" href="#クエリパラメータ" aria-label="Permalink to &quot;クエリパラメータ&quot;">​</a></h2><table tabindex="0"><thead><tr><th>パラメータ名</th><th>型</th><th>必須</th><th>説明</th></tr></thead><tbody><tr><td><code>company</code></td><td>string</td><td>はい</td><td>分析対象の企業名（例：ソニー）</td></tr></tbody></table><h2 id="レスポンス" tabindex="-1">レスポンス <a class="header-anchor" href="#レスポンス" aria-label="Permalink to &quot;レスポンス&quot;">​</a></h2><h3 id="成功時-200-ok" tabindex="-1">成功時（200 OK） <a class="header-anchor" href="#成功時-200-ok" aria-label="Permalink to &quot;成功時（200 OK）&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;summary&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ソニーは新たにEV事業への参入を発表し、株価が上昇しました。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;EV市場の成長と他社との提携が好材料と見られています。&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><table tabindex="0"><thead><tr><th>フィールド名</th><th>型</th><th>説明</th></tr></thead><tbody><tr><td><code>summary</code></td><td>string</td><td>ニュースの要約</td></tr><tr><td><code>analysis</code></td><td>string</td><td>要因や背景に関するAIの分析結果</td></tr></tbody></table><h3 id="エラー時-400-500" tabindex="-1">エラー時（400 / 500） <a class="header-anchor" href="#エラー時-400-500" aria-label="Permalink to &quot;エラー時（400 / 500）&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid request&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="注意事項" tabindex="-1">注意事項 <a class="header-anchor" href="#注意事項" aria-label="Permalink to &quot;注意事項&quot;">​</a></h2><ul><li>このAPIは外部ニュース検索APIとAIモデル（Gemini）を利用しています。</li><li>リクエストのたびにニュース取得とAI要約処理が発生するため、応答に数秒要します。</li></ul><h2 id="ソースコード-抜粋" tabindex="-1">ソースコード（抜粋） <a class="header-anchor" href="#ソースコード-抜粋" aria-label="Permalink to &quot;ソースコード（抜粋）&quot;">​</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// api/analyze-company-news.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { VercelRequest, VercelResponse } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vercel/node&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cheerio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cheerio&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { kv } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vercel/kv&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ヘルパー関数：指定されたURLから本文を抽出する（変更なし）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scrapeArticleText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> articleResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      headers: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;User-Agent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span></span></code></pre></div>`,19)])])}const E=i(e,[["render",l]]);export{c as __pageData,E as default};
